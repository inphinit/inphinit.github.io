<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <title>Rotas - Inphinit PHP</title>
  <meta name="description" content="Aprenda como criar rotas com correspondência baseada em padrões para closures, funções, métodos e controladores, e como isolar rotas em escopos distintos">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, viewport-fit=cover">
  <link rel="stylesheet" type="text/css" href="/css/docs.1765824877.css" media="all">
  <!-- <link rel="alternate" href="/pt/docs/routing/" hreflang="en"> -->
  <!-- <link rel="alternate" href="/pt/docs/routing/" hreflang="pt"> -->
  <script src="/js/docs.1765824877.js"></script>
</head>
<body>
  <div id="container">
    <main>
      <h1>Rotas</h1>
      <p>Aprenda como criar rotas com correspondência baseada em padrões para closures, funções, métodos e controladores, e como isolar rotas em escopos distintos.</p>

      <p>Para criar uma nova rota, edite o <code translate="no">system/main.php</code> arquivo. Se desejar que a rota esteja disponível apenas no modo de desenvolvimento, edite o <code translate="no">system/dev.php</code> arquivo correspondente.</p>

      <section>
        <h2 id="create-routes"><a href="#create-routes">Criar rotas</a></h2>

        <p>
          A criação de uma rota deve ser feita utilizando:
        </p>

        <div class="box">
          <code translate="no" data-lang="php" tabindex="0">
          $app-&gt;action(array | string $method, string $path, $callback);
          </code>
        </div>

        <h3>Utilizando função anônima (closure)</h3>

        <div class="box">
          <code translate="no" data-lang="php" tabindex="0">
          $app-&gt;action('GET', '/closure', function () {
              return 'Hello "closure"!';
          });
          </code>
        </div>

        <h3>Utilizando funções com um nome específico</h3>

        <div class="box">
          <code translate="no" data-lang="php" tabindex="0">
          function sample() {
            echo 'Hour server: ', date('h:i:s');
          }

          $app-&gt;action('GET', '/hour', 'sample');
          </code>
        </div>

        <h3>Utilizando o método de uma instância</h3>

        <div class="box">
          <code translate="no" data-lang="php" tabindex="0">
          class Sample {
            public function method() {
              echo 'Hello!';
            }
          }

          $instance = new Sample();

          $app-&gt;action('ANY', '/', [$instance, 'method']);
          </code>
        </div>

        <h3>Utilizando rotas com múltiplos métodos HTTP</h3>

        <div class="box">
          <code translate="no" data-lang="php" tabindex="0">
          $app-&gt;action(['GET', 'HEAD', 'POST'], '/foo', function () {
              ...
          });

          $app-&gt;action(['PATCH', 'PUT'], '/bar', function () {
              ...
          });
          </code>
        </div>

        <h3>Utilizando controladores</h3>

        <p>
          Para melhor compreender isso na prática, crie um arquivo <code translate="no">system/Controllers/Blog/Post.php</code> com o seguinte conteúdo:
        </p>

        <div class="box">
          <code translate="no" data-lang="php" tabindex="0">
          &lt;?php
          namespace Controllers\Blog;

          class Post {
            public function list($app) {
              return 'Coming soon';
            }

            public function read($app, $params) {
              $id = $params['id'];

              return "ID: {$id}";
            }
          }
          </code>
        </div>

        <p>
          Em seguida, crie as rotas (não é necessário incluir o <code translate="no">Controllers</code> prefixo do namespace — o framework o adiciona automaticamente), por exemplo:
        </p>

        <div class="box">
          <code translate="no" data-lang="php" tabindex="0">
          $app-&gt;action('GET', '/blog/posts', 'Blog\Home::list');
          $app-&gt;action('GET', '/blog/posts/&lt;id&gt;', 'Blog\Home::post');
          </code>
        </div>

        <aside class="info note">
          <svg viewBox="0 0 24 24" role="img">
            <path fill-rule="evenodd" clip-rule="evenodd" d="m10.051 15.75-.535-1.473-.328-.263a4.5 4.5 0 1 1 5.624 0l-.328.263-.535 1.473H10.05zM9 17.25h6l.75-2.066a6 6 0 1 0-7.5 0L9 17.25zm5.25 2.25V18h-4.5v1.5h4.5z"></path>
          </svg>
          <p>
            <strong>Nota:</strong> Para obter mais detalhes sobre o uso, consulte: <a rel="help" href="/pt/docs/controllers.html">Controladores</a>.
          </p>
        </aside>
      </section>

      <section>
        <h2 id="grouping-routes-scope">
          <a href="#grouping-routes-scope">Agrupamento de rotas (escopo)</a>
        </h2>

        <p>
          O sistema de agrupamento de rotas (escopo) é simples e flexível. Ele se baseia na URL ou caminho completo e suporta o <code translate="no">*</code> caractere curinga, bem como os mesmos padrões disponíveis para rotas. Um exemplo de rota só será adicionado se o caminho começar com <code translate="no">/blog/</code>:
        </p>

        <div class="box">
          <code translate="no" data-lang="php" tabindex="0">
          /*
           * http://localhost:5000/blog/
           * http://localhost:5000/blog/post
           * http://localhost:5000/blog/search
           */
          $app-&gt;scope('/blog/', function ($app, $params) {
              $app-&gt;action('GET', '/', function () { ... });
              $app-&gt;action('POST', '/post', function () { ... });
              $app-&gt;action('GET', '/search', function () { ... });
          });
          </code>
        </div>

        <h3>Restringir rotas a um escopo que aceite apenas HTTPS ou HTTP</h3>

        <p>As rotas só serão adicionadas se você estiver acessando via HTTPS:</p>

        <div class="box">
          <code translate="no" data-lang="php" tabindex="0">
          $app-&gt;scope('https://*', function ($app, $params) {
              ...
          });
          </code>
        </div>

        <p>As rotas só serão adicionadas se você estiver acessando via HTTP:</p>

        <div class="box">
          <code translate="no" data-lang="php" tabindex="0">
          $app-&gt;scope('http://*', function ($app, $params) {
              ...
          });
          </code>
        </div>

        <h3>Restringir rotas para que sejam acessíveis apenas dentro de um domínio específico.</h3>

        <p>As rotas só serão adicionadas quando o host da solicitação for <code translate="no">example.com</code></p>

        <div class="box">
          <code translate="no" data-lang="php" tabindex="0">
          $app-&gt;scope('*://example.com/', function ($app, $params) {
              ...
          });
          </code>
        </div>

        <h3>Restringir rotas a um escopo por subdomínio</h3>

        <p>As rotas só serão adicionadas se você estiver acessando um subdomínio de <code translate="no">example.com</code>, por exemplo,<code translate="no">site1.example.com</code></p>

        <div class="box">
          <code translate="no" data-lang="php" tabindex="0">
          $app-&gt;scope('*://*.example.com/', function ($app, $params) {
              ...
          });
          </code>
        </div>

        <p>Utilizando um padrão para capturar o subdomínio:</p>

        <div class="box">
          <code translate="no" data-lang="php" tabindex="0">
          $app-&gt;scope('*://&lt;subdomain&gt;.example.com/', function ($app, $params) {
              $subdomain = $params['subdomain'];
              ...
          });
          </code>
        </div>
      </section>

      <section>
        <h2 id="route-and-scopes-with-url-patterns">
          <a href="#route-and-scopes-with-url-patterns">Rotas e escopos com padrões de URL</a>
        </h2>

        <p>Utilizando um padrão que espera um caminho com um ID <code translate="no">id</code> de qualquer formato:</p>

        <div class="box">
          <code translate="no" data-lang="php" tabindex="0">
          $app-&gt;action('GET', '/users/&lt;id&gt;/&lt;user&gt;', function ($app, $params) {
              $id = $params['id'];
              $username = $params['user'];
              ...
          });
          </code>
        </div>

        <p>Utilizando um padrão que espera um caminho com um nome <code translate="no">id</code> em formato UUID:</p>

        <div class="box">
          <code translate="no" data-lang="php" tabindex="0">
          $app-&gt;action('GET', '/users/&lt;id:uuid&gt;/&lt;user&gt;', function ($app, $params) {
              $id = $params['id'];
              $username = $params['user'];
              ...
          });
          </code>
        </div>

        <p>Padrões padrão:</p>

        <div class="box">
          <table>
          <thead>
          <tr>
          <th>Tipo</th>
          <th>Exemplo</th>
          <th>Descrição</th>
          </tr>
          </thead>
          <tbody>
          <tr>
          <td><code translate="no">alnum</code></td>
          <td><code translate="no">$app-&gt;action('GET', '/baz/&lt;video:alnum&gt;', ...);</code></td>
          <td>Aceita apenas parâmetros alfanuméricos; <code translate="no">$params</code> retorna <code translate="no">['video' =&gt; ...]</code></td>
          </tr>
          <tr>
          <td><code translate="no">alpha</code></td>
          <td><code translate="no">$app-&gt;action('GET', '/foo/bar/&lt;name:alpha&gt;', ...);</code></td>
          <td>Aceita apenas parâmetros alfabéticos; <code translate="no">$params</code> retorna <code translate="no">['name' =&gt; ...]</code></td>
          </tr>
          <tr>
          <td><code translate="no">decimal</code></td>
          <td><code translate="no">$app-&gt;action('GET', '/baz/&lt;price:decimal&gt;', ...);</code></td>
          <td>Aceita apenas parâmetros numéricos decimais; <code translate="no">$params</code> retorna <code translate="no">['price' =&gt; ...]</code></td>
          </tr>
          <tr>
          <td><code translate="no">num</code></td>
          <td><code translate="no">$app-&gt;action('GET', '/foo/&lt;id:num&gt;', ...);</code></td>
          <td>Aceita apenas parâmetros inteiros; <code translate="no">$params</code> retorna <code translate="no">['id' =&gt; ...]</code></td>
          </tr>
          <tr>
          <td><code translate="no">nospace</code></td>
          <td><code translate="no">$app-&gt;action('GET', '/foo/&lt;nospace:nospace&gt;', ...);</code></td>
          <td>Aceita qualquer caractere, exceto espaços, como <code translate="no">%20</code> tabulações (veja o <code translate="no">\S</code> padrão regex).</td>
          </tr>
          <tr>
          <td><code translate="no">uuid</code></td>
          <td><code translate="no">$app-&gt;action('GET', '/bar/&lt;barcode:uuid&gt;', ...);</code></td>
          <td>Aceita parâmetros formatados em UUID; <code translate="no">$params</code> retorna <code translate="no">['barcode' =&gt; ...]</code></td>
          </tr>
          <tr>
          <td><code translate="no">version</code></td>
          <td><code translate="no">$app-&gt;action('GET', '/baz/&lt;api:version&gt;', ...);</code></td>
          <td>Aceita parâmetros no formato <em>Semantic Versioning 2.0.0 (SemVer)</em> ; <code translate="no">$params</code> retorna <code translate="no">['api' =&gt; ...]</code></td>
          </tr>
          </tbody>
          </table>
        </div>

        <p>Os padrões são muito flexíveis, permitindo que sejam modificados usando uma expressão regular personalizada. Substitua o formato <em>SemVer</em> pelo <code translate="no">&lt;major&gt;.&lt;minor&gt;.&lt;revision&gt;.&lt;build&gt;</code> formato:</p>

        <div class="box">
          <code translate="no" data-lang="php" tabindex="0">
          $app-&gt;action('GET', '/download/&lt;foobar:version&gt;/&lt;user&gt;', function ($app, $params) {
              $version = $params['foobar'];
              ...
          });

          $app-&gt;setPattern('version', '\d+\.\d+\.\d+\.\d+');
          </code>
        </div>

        <p>Substitua o formato <em>SemVer</em> pelo <code translate="no">&lt;major&gt;.&lt;minor&gt;</code> formato (útil para APIs da web):</p>

        <div class="box">
          <code translate="no" data-lang="php" tabindex="0">
          $app-&gt;action('GET', '/api/&lt;foobar:version&gt;/&lt;user&gt;', function ($app, $params) {
              $version = $params['foobar'];
              ...
          });

          $app-&gt;setPattern('version', '\d+\.\d+');
          </code>
        </div>
      </section>

      <section>
        <h2 id="sharing-data">
          <a href="#sharing-data">Compartilhamento de dados</a>
        </h2>

        <p>
          A flexibilidade da <code translate="no">Inphinit\App</code> classe permite definir propriedades dinamicamente, proporcionando acesso conveniente a informações dentro de controladores ou funções de retorno de chamada de rotas. Exemplo:
        </p>

        <div class="box">
          <code translate="no" data-lang="php" tabindex="0">
          $app-&gt;scope('https://api.example.com/', function ($app, $params) {
              $app-&gt;userInfo = authUserInfoContext();
              $app-&gt;customers = customersContext();

              Response:type('application/json');

              $app-&gt;action('GET', '/me', function ($app, $params) {
                  return json_encode($app-&gt;userInfo-&gt;get());
              });

              $app-&gt;action('GET', '/customers', 'Api\\Clients::list');
              $app-&gt;action('GET', '/customers/&lt;id:uuid&gt;/orders', 'Api\\Clients::orders');
          });
          </code>
        </div>

        <p>Exemplo de utilização de dados compartilhados no Controlador:</p>

        <div class="box">
          <code translate="no" data-lang="php" tabindex="0">
          &lt;?php
          namespace Controllers;

          class FooBar
          {
              public function list($app, $params)
              {
                  return json_encode($app-&gt;customers-&gt;all());
              }

              public function orders($app, $params)
              {
                  $customerId = $params['id'];
                  $customer = $app-&gt;customers-&gt;find($customerId);

                  return json_encode($customer-&gt;orders());
              }
          }
          </code>
        </div>
      </section>

      <section>
        <h2 id="more-route-feautures"><a href="#more-route-feautures">Mais recursos de rota</a></h2>
        <ul>
          <li><a href="/pt/docs/routing/implicit-route-controllers.html" rel="help">Controladores de rota implícitos</a></li>
          <li><a href="/pt/docs/routing/resource.html" rel="help">Rotas de recursos</a></li>
        </ul>
      </section>

      <footer>
        <a href="/pt/docs/controllers.html" class="info" rel="next" translate="no">
          <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" role="img">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 12H5M5 12L12 19M5 12L12 5"></path>
          </svg>
          <p>Controllers</p>
        </a>
        <a href="/pt/docs/structure.html" class="info" rel="prev" translate="no">
          <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" role="img">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 12H5M5 12L12 19M5 12L12 5"></path>
          </svg>
          <p>Structure</p>
        </a>
      </footer>
    </main>
    <footer>
      <div>
        <p>Última atualização em <time datetime="2025-12-22">22 de Novembro de 2025</time>.</p>
        <p>Conteúdo licenciado sob CC BY-SA.</p>
      </div>
      <div>
        <p>
          Layout criado por <a rel="external" target="_blank" href="https://github.com/brcontainer">Brcontainer</a>
        </p>
      </div>
    </footer>
  </div>

  <header>
    <a href="/">Página inicial</a>
    <div>
      <!--
      <form method="get" id="search" action="http://duckduckgo.com/">
        <input type="hidden" name="sites" value="inphinit.github.io"/>
        <input type="hidden" name="k8" value="#444444"/>
        <input type="hidden" name="k9" value="#D51920"/>
        <input type="hidden" name="kt" value="h"/>
        <input type="text" name="q" maxlength="255" placeholder="Search&hellip;"/>
        <input type="submit" value="DuckDuckGo Search" style="visibility: hidden;" />
      </form>
      -->
      <a
        href="https://github.com/inphinit/inphinit"
        rel="external"
        target="_blank"
        aria-label="Access Github for get source">
        <svg
          fill="currentColor"
          viewBox="0 0 24 24"
          role="img"
          class="icon">
          <path d="M12 1.602c-6.077 0-11 4.818-11 10.766 0 4.763 3.149 8.787 7.521 10.213.55.095.756-.228.756-.51 0-.257-.013-1.104-.013-2.006-2.764.498-3.479-.66-3.699-1.265-.124-.31-.66-1.265-1.128-1.52-.385-.202-.935-.7-.013-.714.866-.013 1.485.78 1.691 1.104.99 1.628 2.571 1.17 3.204.888.096-.7.385-1.17.701-1.44-2.447-.27-5.005-1.198-5.005-5.316 0-1.17.426-2.14 1.128-2.893-.11-.269-.495-1.372.11-2.853 0 0 .92-.282 3.024 1.104.88-.242 1.816-.364 2.75-.364.936 0 1.87.122 2.75.364 2.104-1.4 3.025-1.104 3.025-1.104.605 1.48.22 2.584.11 2.853.702.754 1.128 1.71 1.128 2.893 0 4.132-2.571 5.047-5.019 5.316.399.336.743.982.743 1.992 0 1.44-.014 2.597-.014 2.96 0 .283.206.62.756.511a11.003 11.003 0 0 0 5.426-3.927A10.628 10.628 0 0 0 23 12.368C23 6.42 18.078 1.602 12 1.602z"/>
        </svg>
        <span class="compact">Apoie com uma estrela no GitHub</span>
      </a>
      <div class="btn" id="color-scheme">
        <select aria-label="Color Scheme">
          <option>Auto</option>
          <option>Dark</option>
          <option>Light</option>
        </select>
        <svg
          fill="currentColor"
          viewBox="0 0 20 20"
          role="img"
          class="icon">
          <path d="M10 2a.75.75 0 0 1 .75.75v1.5a.75.75 0 0 1-1.5 0v-1.5A.75.75 0 0 1 10 2ZM10 15a.75.75 0 0 1 .75.75v1.5a.75.75 0 0 1-1.5 0v-1.5A.75.75 0 0 1 10 15ZM10 7a3 3 0 1 0 0 6 3 3 0 0 0 0-6ZM15.657 5.404a.75.75 0 1 0-1.06-1.06l-1.061 1.06a.75.75 0 0 0 1.06 1.06l1.06-1.06ZM6.464 14.596a.75.75 0 1 0-1.06-1.06l-1.06 1.06a.75.75 0 0 0 1.06 1.06l1.06-1.06ZM18 10a.75.75 0 0 1-.75.75h-1.5a.75.75 0 0 1 0-1.5h1.5A.75.75 0 0 1 18 10ZM5 10a.75.75 0 0 1-.75.75h-1.5a.75.75 0 0 1 0-1.5h1.5A.75.75 0 0 1 5 10ZM14.596 15.657a.75.75 0 0 0 1.06-1.06l-1.06-1.061a.75.75 0 1 0-1.06 1.06l1.06 1.06ZM5.404 6.464a.75.75 0 0 0 1.06-1.06l-1.06-1.06a.75.75 0 1 0-1.061 1.06l1.06 1.06Z"/>
        </svg>
      </div>
    </div>
  </header>

  <button id="menu-toggle" class="btn" aria-label="Display/Hide menu">
    <svg fill="currentColor" viewBox="0 0 24 24" role="img" class="icon">
      <path d="M21 6H3V5h18v1zm0 5H3v1h18v-1zm0 6H3v1h18v-1z"/>
    </svg>
    <!-- <svg fill="currentColor" viewBox="0 0 24 24" role="img" class="icon">
      <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
    </svg> -->
  </button>

  <nav id="menu" tabindex="-1">
  <div>
    <a href="/pt/docs/">Comece agora</a>
    <dl>
      <dt>Servidor web</dt>
      <!-- <dd><a href="/pt/docs/web-server/apache.html">Apache</a></dd> -->
      <dd><a href="/pt/docs/web-server/nginx.html">nginx</a></dd>
      <dd><a href="/pt/docs/web-server/iis.html">IIS</a></dd>
      <dd><a href="/pt/docs/web-server/iis-express.html">IIS Express</a></dd>
    </dl>
    <a href="/pt/docs/structure.html">Estrutura</a>
    <a href="/pt/docs/routing/">Roteamento</a>
    <dl>
      <dt>Recursos de roteamento</dt>
      <dd><a href="/pt/docs/routing/implicit-route-controllers.html">Controladores de rota implícitos</a></dd>
      <dd><a href="/pt/docs/routing/resource.html">Rotas de recursos</a></dd>
    </dl>
    <a href="/pt/docs/controllers.html">Controladores</a>
    <a href="/pt/docs/views.html">Views</a>
    <a href="/pt/docs/configurations.html">Configurações</a>
    <a href="/pt/docs/debugging.html">Depuração</a>
    <a href="/pt/docs/maintenance.html">Manutenção</a>
    <a href="/pt/docs/error-pages.html">Páginas de erro</a>
    <a href="/pt/docs/console-commands.html">Comandos do console</a>
    <a href="/pt/docs/events.html">Eventos</a>
    <a href="/pt/docs/checkup.html">Checar</a>
    <a href="/pt/docs/http/request.html">Requisição HTTP</a>
    <a href="/pt/docs/http/response.html">Resposta HTTP</a>
    <dl>
      <dt>Funcionalidades HTTP</dt>
      <dd><a href="/pt/docs/http/content-negotiation.html">Negociação de Conteúdo</a></dd>
      <dd><a href="/pt/docs/http/response-codes.html">Códigos de resposta</a></dd>
    </dl>
    <!-- <a href="/pt/docs/storage-and-files.html">Storage and Files</a> -->
    <!-- <a href="/pt/docs/cache.html">Cache</a> -->
    <a href="/pt/docs/dom/">DOM, XML, HTML</a>
    <dl>
      <dt>Características do DOM</dt>
      <dd><a href="/pt/docs/dom/css-selector.html">Seletores CSS em PHP</a></dd>
      <dd><a href="/pt/docs/dom/dom-with-arrays.html">DOM com Arrays</a></dd>
      <dd><a href="/pt/docs/dom/errors.html">Erros DOM</a></dd>
    </dl>
    <a href="/pt/docs/utilities/">Serviços públicos</a>
    <dl>
      <dt>Utilitários específicos</dt>
      <dd><a href="/pt/docs/utilities/url.html">URLs</a></dd>
      <dd><a href="/pt/docs/utilities/version.html">Versão</a></dd>
    </dl>
    <a href="/pt/docs/experimental/">Experimental</a>
    <!-- <a href="/pt/docs/performance.html">Performance</a> -->
    <dl>
      <dt>Produção</dt>
      <!-- <dd><a href="/pt/docs/production/forwarded.html">Forwarded</a></dd> -->
      <dd><a href="/pt/docs/production/send-file.html">Enviar arquivo</a></dd>
    </dl>
    <dl>
      <dt>Pacotes</dt>
      <dd><a href="/pt/docs/packages/inphinit-proxy.html">Inphinit Proxy</a></dd>
    </dl>
  </div>
  </nav>

  <div id="menu-backdrop"></div>
</body>
</html>
